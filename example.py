# basic usage of mtgscan
# env variables AZURE_VISION_ENDPOINT and AZURE_VISION_KEY must be set

from mtgscan.text import MagicRecognition
from mtgscan.ocr.azure import Azure

CARD_URL = "https://user-images.githubusercontent.com/49362475/105632710-fa07a180-5e54-11eb-91bb-c4710ef8168f.jpeg"
CARD_DICTIONARY = "powercube_cards.txt"
cards = ["Giver of Runes","Blade Splicer","Flickerwisp","Monastery Mentor","Recruiter of the Guard","Thalia, Heretic Cathar","Student of Warfare","Porcelain Legionnaire","Mother of Runes","Restoration Angel","Karmic Guide","Hero of Bladehold","Sun Titan","Elesh Norn, Grand Cenobite","Tithe Taker","Leonin Arbiter","Stoneforge Mystic","Path to Exile","Swords to Plowshares","Unexpectedly Absent","Balance","Council's Judgment","Mana Tithe","Lingering Souls","Spectral Procession","Armageddon","Wrath of God","Terminus","Parallax Wave","Thalia, Guardian of Thraben","Leonin Relic-Warder","Delver of Secrets","Baral, Chief of Compliance","Jace, Vryn's Prodigy","Phantasmal Image","Snapcaster Mage","Trinket Mage","True-Name Nemesis","Wall of Omens","Thraben Inspector","Urza, Lord High Artificer","Venser, Shaper Savant","Phyrexian Metamorph","Narset, Parter of Veils","Jace, the Mind Sculptor","Ancestral Recall","Brainstorm","Force Spike","Vendilion Clique","Mystical Tutor","Spell Pierce","Brain Freeze","Counterspell","Daze","Mana Drain","Mana Leak","High Tide","Remand","Frantic Search","Cryptic Command","Fact or Fiction","Turnabout","Force of Will","Mystic Confluence","Memory Lapse","Miscalculation","Gitaxian Probe","Ponder","Preordain","Sleight of Hand","Chart a Course","Merchant Scroll","Time Walk","Show and Tell","Dig Through Time","Tinker","Mind's Desire","Time Spiral","Upheaval","Putrid Imp","Dark Confidant","Oona's Prowler","Vampire Hexmage","Timetwister","Shriekmaw","Grave Titan","Griselbrand","Liliana of the Veil","Dark Ritual","Entomb","Fatal Push","Rain of Filth","Rotting Regisaur","Cabal Ritual","Tainted Pact","Corpse Dance","Dismember","Duress","Inquisition of Kozilek","Reanimate","Thoughtseize","Vampiric Tutor","Demonic Tutor","Exhume","Hymn to Tourach","Night's Whisper","Toxic Deluge","Yawgmoth's Will","Damnation","Tendrils of Agony","Collective Brutality","Animate Dead","Dance of the Dead","Necromancy","Recurring Nightmare","Goblin Guide","Goblin Welder","Grim Lavamancer","Monastery Swiftspear","Mind Twist","Goblin Rabblemaster","Magus of the Moon","Flametongue Kavu","Inferno Titan","Worldgorger Dragon","Chandra, Torch of Defiance","Lightning Bolt","Red Elemental Blast","Young Pyromancer","Ancient Grudge","Seething Song","Through the Breach","Fireblast","Chain Lightning","Faithless Looting","Firebolt","Pyroclasm","Abrade","Wheel of Fortune","Empty the Warrens","Fiery Confluence","Mana Flare","Sulfuric Vortex","Sneak Attack","Arbor Elf","Birds of Paradise","Light Up the Stage","Joraga Treespeaker","Noble Hierarch","Collector Ouphe","Lotus Cobra","Rofellos, Llanowar Emissary","Sakura-Tribe Elder","Scavenging Ooze","Sylvan Caryatid","Elvish Mystic","Wall of Blossoms","Wall of Roots","Eternal Witness","Managorger Hydra","Reclamation Sage","Tireless Tracker","Courser of Kruphix","Oracle of Mul Daya","Tarmogoyf","Primeval Titan","Craterhoof Behemoth","Woodfall Primus","Garruk Wildspeaker","Crop Rotation","Dissenter's Deliverance","Channel","Regrowth","Thragtusk","Natural Order","Scapeshift","Green Sun's Zenith","Fastbond","Oath of Druids","Survival of the Fittest","Sylvan Library","Heartbeat of Spring","Eureka","Spell Queller","Teferi, Time Raveler","Supreme Verdict","Baleful Strix","Thief of Sanity","Daretti, Ingenious Iconoclast","Kolaghan's Command","Manamorphose","Geist of Saint Traft","Knight of the Reliquary","Tidehollow Sculler","Vindicate","Deathrite Shaman","Abrupt Decay","Pernicious Deed","Fire","Dack Fayden","Bloodbraid Elf","Lightning Helix","Leovold, Emissary of Trest","Black Lotus","Chrome Mox","Everflowing Chalice","Lion's Eye Diamond","Lotus Petal","Mana Crypt","Figure of Destiny","Mox Emerald","Mox Jet","Mox Pearl","Mox Ruby","Mox Sapphire","Mana Vault","Pithing Needle","Relic of Progenitus","Mox Diamond","Skullclamp","Sol Ring","Azorius Signet","Boros Signet","Dimir Signet","Golgari Signet","Grim Monolith","Gruul Signet","Sensei's Divining Top","Null Rod","Orzhov Signet","Pentad Prism","Rakdos Signet","Selesnya Signet","Simic Signet","Smuggler's Copter","Sphere of Resistance","Izzet Signet","Umezawa's Jitte","Winter Orb","Basalt Monolith","Coalition Relic","Crucible of Worlds","Tangle Wire","Worn Powerstone","Mystic Forge","Thorn of Amethyst","Memory Jar","Phyrexian Revoker","Scrapheap Scrounger","Metalworker","Lodestone Golem","Solemn Simulacrum","Wurmcoil Engine","Myr Battlesphere","Batterskull","Blightsteel Colossus","Emrakul, the Promised End","Emrakul, the Aeons Torn","Adarkar Wastes","Ancient Tomb","Arid Mesa","Badlands","Bayou","Sundering Titan","Blood Crypt","Bloodstained Mire","Breeding Pool","Brushland","Celestial Colonnade","City of Brass","City of Traitors","Creeping Tar Pit","Bazaar of Baghdad","Flooded Strand","Gaea's Cradle","Godless Shrine","Hallowed Fountain","Karakas","Karplusan Forest","Mana Confluence","Dark Depths","Misty Rainforest","Overgrown Tomb","Plateau","Polluted Delta","Raging Ravine","Sacred Foundry","Savannah","Mishra's Workshop","Marsh Flats","Scrubland","Steam Vents","Stomping Ground","Strip Mine","Sulfurous Springs","Temple Garden","Scalding Tarn","Tropical Island","Tundra","Underground River","Underground Sea","Valakut, the Molten Pinnacle","Verdant Catacombs","Thespian's Stage","Tolarian Academy","Taiga","Wasteland","Watery Grave","Windbrisk Heights","Windswept Heath","Wooded Foothills","Karn, Scion of Urza","Nissa, Who Shakes the World","Dire Fleet Daredevil","Volcanic Island","Time Warp","Prismatic Vista","Seasoned Pyromancer","Wrenn and Six","Skyclave Apparition","Dreadhorde Arcanist","Ramunap Excavator","Dryad of the Ilysian Grove","Force of Negation","Golos, Tireless Pilgrim","Hullbreacher","Opposition Agent","Bloodthirsty Adversary","Fractured Identity","Damn","Archon of Cruelty","Birgi, God of Storytelling","Fallen Shinobi","Elite Spellbinder","Thassa's Oracle","Bolas's Citadel","Dragon's Rage Channeler","Ragavan, Nimble Pilferer","Plague Engineer","Expressive Iteration","Dauthi Voidwalker","Emry, Lurker of the Loch","Prismatic Ending","Usher of the Fallen","Abundant Harvest","Laelia, the Blade Reforged","Augur of Autumn","Esper Sentinel","Fury","Thieving Skydiver","Ignoble Hierarch","Underworld Breach","Urza's Saga","Bloodchief's Thirst","Ravenous Chupacabra","Rampaging Ferocidon","Omnath, Locus of Creation","Niv-Mizzet Reborn","Oko, Thief of Crowns","Luminarch Aspirant","Elvish Reclaimer","Finale of Devastation","Bomat Courier","Fable of the Mirror-Breaker","The Wandering Emperor","Lion Sash","Adeline, Resplendent Cathar","Adanto Vanguard","Walking Ballista","Sedgemoor Witch","Infernal Grasp","Ulamog, the Ceaseless Hunger","Grist, the Hunger Tide","Echo of Eons","Teferi, Hero of Dominaria","Bonecrusher Giant","Murderous Rider","Grief","Unholy Heat","Force of Vigor","Palace Jailer","Wishclaw Talisman","Kaito Shizuki","Shallow Grave","Spellseeker","Glorybringer","Bone Shards","Ketria Triome","Zagoth Triome","Indatha Triome","Savai Triome","Xander's Lounge","Ziatora's Proving Ground","Spara's Headquarters","Raffine's Tower","Raugrin Triome","Tourach, Dread Cantor","Archivist of Oghma","Kaldra Compleat","White Plume Adventurer","Undermountain Adventurer","Caves of Chaos Adventurer","Minsc & Boo, Timeless Heroes","Seasoned Dungeoneer","Jetmir's Garden","The One Ring","Forth Eorlingas!","Orcish Bowmasters","Solitude","Sheoldred, the Apocalypse","Mishra's Bauble","Urza's Bauble","Portal to Phyrexia","Delighted Halfling","Tamiyo, Collector of Tales","Leyline Binding","Intrepid Adversary","Loran of the Third Path","Ephemerate","Reprieve","Ledger Shredder","Chrome Host Seedshark","Zuran Orb","Hard Evidence","Lórien Revealed","Dream Halls","Custodi Lich","Troll of Khazad-dûm","Snuff Out","Atraxa, Grand Unifier","Mine Collapse","Displacer Kitten","Flash","Titania, Protector of Argoth","Palantír of Orthanc","Worldspine Wurm","Nissa, Ascended Animist","Life from the Loam","Yawgmoth, Thran Physician","Kaito, Dancing Shadow","Hexdrinker","Etali, Primal Conqueror","Lurrus of the Dream-Den","Tear Asunder","Sail into the West","Retrofitter Foundry","Kinnan, Bonder Prodigy","The Mightstone and Weakstone","Helm of Awakening","Fire Covenant","Faerie Mastermind","Brazen Borrower","Haywire Mite","Pest Infestation","Exploration","Bloodtithe Harvester","Saheeli, Sublime Artificer","Third Path Iconoclast","Staff of the Storyteller","Knight of Autumn","Goldspan Dragon","Subtlety","Lotus Field","Sheoldred's Edict","Portable Hole","Once Upon a Time","Mox Opal","Currency Converter","Boseiju, Who Endures","Zirda, the Dawnwaker","Coveted Jewel","Kumano Faces Kakkazan","Comet, Stellar Pup","Squee, Dubious Monarch","Rampaging Raptor","Molten Collapse","Otawara, Soaring City","Waterlogged Grove","Fiery Islet","Sunbaked Canyon","Nurturing Peatland","Silent Clearing","The Flux","Graveyard Trespasser","Hangarback Walker","Cathar Commando","Inti, Seneschal of the Sun","Oliphaunt","Archon of Emeria","Voice of Resurgence","Malcolm, Alluring Scoundrel","Bitter Triumph","Questing Beast","Broadside Bombardiers","Shelldock Isle","Aragorn, King of Gondor","Deep-Cavern Bat","Torsten, Founder of Benalia","Sentinel of the Nameless City","Samwise the Stouthearted","Concealing Curtains","Gut, True Soul Zealot","Embereth Shieldbreaker","Cryptic Coat","Forensic Gadgeteer","Get Lost","Shadowy Backstreet","Frost Fair Lure Fish","Lush Portico","Scion of Draco","Tribal Flames","Lazav, Wearer of Faces","Elegant Parlor","Territorial Kavu","Scholar of New Horizons","Novice Inspector","Kappa Cannoneer","Life","Nishoba Brawler","Unruly Krasis","Esika's Chariot","Carnage Interpreter","Pyrokinesis","Flame Slash","Rite of Flame","From the Catacombs","Tishana's Tidebinder","Demonic Consultation","Doomsday","Hedge Maze","March of Otherworldly Light","Sauron's Ransom","Jace, Wielder of Mysteries","Thundering Falls","Underground Mortuary","Containment Priest","Raucous Theater","Preacher of the Schism","Mawloc","Chaos Defiler"]

azure = Azure()
rec = MagicRecognition(file_all_cards=CARD_DICTIONARY, file_keywords="Keywords.json", cube_cards=cards)
box_texts = azure.image_to_box_texts(CARD_URL)
deck = rec.box_texts_to_deck(box_texts)
# print(deck.maindeck.__len__)
n = 0
for c, k in deck:
    n = n+1
    print(c, k)
print("total cards " + str(n))
